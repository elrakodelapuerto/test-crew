(this.webpackJsonpcrew=this.webpackJsonpcrew||[]).push([[0],{10:function(e,c,t){e.exports={editSearcher:"AddSearcher_editSearcher__3WV-a",header:"AddSearcher_header__LVF8j",back:"AddSearcher_back__z1VRF",form:"AddSearcher_form__mZG1g"}},114:function(e,c){},115:function(e,c){},133:function(e,c,t){"use strict";t.r(c);var r=t(1),a=t.n(r),s=t(51),n=t.n(s),i=(t(57),t(8)),l=t(9),d=t(3),o=t(17),j=t(11),h=t.n(j),u=t(0),b=new h.a({apiKey:"keyHvrSKnN3fo7ORx"}).base("appou4euyZ2UDPPEg"),O=function(){var e=Object(r.useState)([]),c=Object(i.a)(e,2),t=c[0],a=c[1],s=Object(r.useState)([]),n=Object(i.a)(s,2),d=n[0],j=n[1];Object(r.useEffect)((function(){b("Quests").select().all((function(e,c){var t=c.map((function(e){return e.fields}));a(t)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Quests"}),Object(u.jsxs)("div",{children:["Link ",Object(u.jsx)("br",{}),Object(u.jsx)("input",{value:d,onChange:function(e){return j(e.target.value)}})]}),Object(u.jsx)("button",{onClick:function(){return e=d,void b("Quests").create([{fields:{quest_id:20000003,full_name:"\u0425\u0430\u0440\u043e\u043d\u043e\u0432 \u0425\u0430\u0440\u043e\u043d \u0425\u0430\u0440\u043e\u043d\u043e\u0432\u0438\u0447",chat_link:e}}],(function(e,c){if(e)console.error(e);else{var r=c.map((function(e){return e.fields}))[0];a([].concat(Object(o.a)(t),[r]))}}));var e},children:"Add Quest"}),Object(u.jsx)("ul",{children:t&&t.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(l.b,{to:"/crew?quest_id="+e.quest_id,children:e.full_name})},e.quest_id)}))})]})},_=t(2),x=t.n(_),f=t.p+"static/media/back.a12e73f8.svg",m=(t.p,t(15)),p=t.p+"static/media/pilot.fd0a23e8.svg",g=t.p+"static/media/time.61c1fb73.svg",v=t.p+"static/media/place.ac853a25.svg",S=function(e){var c=new Date(e),t=new Date,r=new Date;r.setDate(r.getDate()+1);var a=t.toLocaleDateString()===c.toLocaleDateString()?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":r.toLocaleDateString()===c.toLocaleDateString()?"\u0417\u0430\u0432\u0442\u0440\u0430":c.toLocaleDateString(),s=c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return"".concat(s," (").concat(a,")")};function y(e){var c=e.searcher,t=e.toggleModal,r=e.lite,a=void 0!==r&&r,s=c.searcher_role,n=c.searcher_phone,i=c.searcher_time,l=c.call_sign,d=c.searcher_place;return Object(u.jsxs)("div",{onClick:function(){return t(c)},className:x.a.searcher,children:[Object(u.jsxs)("div",{className:x.a.searcherHeader,children:[Object(u.jsxs)("div",{className:x.a.searcherCallSign,children:[l,s.includes("\u043f\u0438\u043b\u043e\u0442")?Object(u.jsxs)("span",{className:x.a.isPilot,children:[Object(u.jsx)("img",{src:p,alt:""})," "]}):""]}),Object(u.jsx)("div",{children:n})]}),!a&&Object(u.jsxs)("div",{className:x.a.searcherBody,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{children:Object(u.jsx)("img",{src:v})}),Object(u.jsx)("span",{children:d})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{children:Object(u.jsx)("img",{src:g})}),Object(u.jsx)("span",{children:S(i)})]})]})]})}function w(e){var c=e.crews,t=e.toggleModal;return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:x.a.separator}),Object(u.jsx)("h3",{children:"\u0418\u043d\u0444\u043e\u0440\u0433\u0438:"}),c.inforgs&&c.inforgs.map((function(e){return Object(u.jsx)(y,{toggleModal:t,lite:!0,searcher:e})}))]})}function N(e){var c=e.crews,t=e.setSelected,r=e.selectedSearchers,a=e.toggleModal;function s(e){var c=Object(o.a)(r),a=r.indexOf(e);-1===a?c.push(e):c.splice(a,1),t(c)}return Object(u.jsx)("div",{className:x.a.status,children:c&&c.statuses&&Object.keys(c.statuses).map((function(e){if(c.statuses[e].length>0){var t="\u0433\u043e\u0442\u043e\u0432"!==e&&"\u0432 \u043f\u0443\u0442\u0438 \u043d\u0430 \u0437\u0430\u0434\u0430\u0447\u0443"!==e;return"\u0432 \u043f\u0443\u0442\u0438 \u043d\u0430 \u0437\u0430\u0434\u0430\u0447\u0443"===e?Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:x.a.separator}),Object(u.jsx)("h3",{children:"\u0412 \u043f\u0443\u0442\u0438 \u043d\u0430 \u0437\u0430\u0434\u0430\u0447\u0443:"}),c.crews&&c.crews.map((function(e,c){return Object(u.jsxs)("div",{children:[e.length>0&&Object(u.jsx)("h4",{children:0===c?"\u0416\u0434\u0443\u0442 \u044d\u043a\u0438\u043f\u0430\u0436":"\u042d\u043a\u0438\u043f\u0430\u0436 #"+c}),e&&e.map((function(e){return e&&Object(u.jsx)(y,{lite:t,toggleModal:a,searcher:e,select:s})}))]})}))]}):Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:x.a.separator}),Object(u.jsxs)("h3",{children:[e,":"]}),c.statuses[e]&&c.statuses[e].map((function(e){return e&&Object(u.jsx)(y,{lite:t,toggleModal:a,searcher:e,select:s})}))]})}}))})}var k={currentQuest:[],get crews(){var e=this,c=[[]];return Object(o.a)(new Set(this.statuses["\u0432 \u043f\u0443\u0442\u0438 \u043d\u0430 \u0437\u0430\u0434\u0430\u0447\u0443"].map((function(e){return e.searcher_crew})))).forEach((function(t){0===t?c[0]=e.statuses["\u0432 \u043f\u0443\u0442\u0438 \u043d\u0430 \u0437\u0430\u0434\u0430\u0447\u0443"].filter((function(e){return e.searcher_crew===t})):c.push(e.statuses["\u0432 \u043f\u0443\u0442\u0438 \u043d\u0430 \u0437\u0430\u0434\u0430\u0447\u0443"].filter((function(e){return e.searcher_crew===t})))})),c},get inforgs(){return this.currentQuest.filter((function(e){return e.searcher_role.includes("\u0438\u043d\u0444\u043e\u0440\u0433")}))},get snm(){return this.currentQuest.filter((function(e){return e.searcher_role.includes("\u0441\u043d\u043c")}))},get coord(){return this.currentQuest.filter((function(e){return e.searcher_role.includes("\u043a\u043e\u043e\u0440\u0434")}))},get statuses(){var e={"\u0433\u043e\u0442\u043e\u0432":[],"\u0432 \u043f\u0443\u0442\u0438 \u043d\u0430 \u0437\u0430\u0434\u0430\u0447\u0443":[],"\u043d\u0430 \u0437\u0430\u0434\u0430\u0447\u0435":[],"\u0432 \u043f\u0443\u0442\u0438 \u0434\u043e\u043c\u043e\u0439":[],"\u0434\u043e\u043c\u0430":[]};return this.currentQuest.forEach((function(c){("\u0433\u043e\u0442\u043e\u0432"!==c.searcher_status||c.searcher_role.includes("\u043f\u0438\u043b\u043e\u0442")||c.searcher_role.includes("\u043f\u0435\u0448\u0438\u0439"))&&e[c.searcher_status].push(c)})),e}};function D(e){var c=e.questID,t=e.toggleModal,a=Object(r.useState)({}),s=Object(i.a)(a,2),n=s[0],l=s[1],d=Object(r.useState)([]),o=Object(i.a)(d,2),j=o[0],b=o[1],O=new h.a({apiKey:"keyHvrSKnN3fo7ORx"}).base("appou4euyZ2UDPPEg");return Object(r.useEffect)((function(){O("Searchers").select().all((function(e,t){var r=t.map((function(e){return Object(m.a)(Object(m.a)({},e.fields),{},{searchers_table_id:e.id})}));O("CrewMeta").select({filterByFormula:"{quest_id} = ".concat(c)}).all((function(e,c){k.currentQuest=c.map((function(e){return Object(m.a)(Object(m.a)({},e.fields),{},{meta_table_id:e.id},r.find((function(c){return c.searcher_id===e.fields.searcher_id})))})),console.log(k),l(Object(m.a)({},k))}))}))}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)(w,{toggleModal:t,crews:n}),Object(u.jsx)(N,{toggleModal:t,crews:n,setSelected:b,selectedSearchers:j}),Object(u.jsxs)("div",{children:[j&&j.map((function(e){return Object(u.jsx)("div",{children:e.call_sign})})),Object(u.jsx)("button",{onClick:function(){O("CrewMeta").update([],(function(e,c){c.forEach((function(e){k.currentQuest.find((function(c){return c.meta_table_id===e.id})).searcher_status=e.fields.searcher_status,l(Object(m.a)({},k))}))}))},children:"\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0432 \u044d\u043a\u0438\u043f\u0430\u0436"})]})]})}var B=t(10),C=t.n(B),E=new h.a({apiKey:"keyHvrSKnN3fo7ORx"}).base("appou4euyZ2UDPPEg"),I=function(){var e=Object(d.e)();Object(r.useEffect)((function(){document.body.style.overflowY="auto"}),[]);var c=new URLSearchParams(Object(d.f)().search).get("quest_id");return Object(u.jsxs)("div",{className:C.a.editSearcher,children:[Object(u.jsxs)("div",{className:C.a.header,children:[Object(u.jsx)("div",{className:C.a.back,onClick:function(){return e.goBack()},children:Object(u.jsx)("img",{src:f,alt:"back"})}),Object(u.jsx)("h1",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("form",{className:C.a.form,onSubmit:function(t){return function(t){t.preventDefault();var r=Object.fromEntries(new FormData(t.target)),a=new Date(r.searcher_time).toISOString(),s={quest_id:parseInt(c),searcher_crew:0,searcher_id:parseInt(r.searcher_id),searcher_place:r.searcher_place,searcher_role:[r.searcher_role],searcher_status:"\u0433\u043e\u0442\u043e\u0432",searcher_time:a},n={searcher_id:parseInt(r.searcher_id),searcher_phone:r.searcher_phone,call_sign:r.call_sign};E("CrewMeta").create([{fields:s}],(function(c,t){c?console.error(c):(t.forEach((function(e){console.log(e.getId())})),E("Searchers").create([{fields:n}],(function(c,t){c?console.error(c):t.forEach((function(c){console.log(c.getId()),e.goBack()}))})))}))}(t)},children:[Object(u.jsxs)("label",{children:["\u041f\u043e\u0437\u044b\u0432\u043d\u043e\u0439:",Object(u.jsx)("input",{type:"text",name:"call_sign"})]}),Object(u.jsxs)("label",{children:["@id:",Object(u.jsx)("input",{type:"number",name:"searcher_id"})]}),Object(u.jsxs)("label",{children:["\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430:",Object(u.jsx)("input",{type:"phone",name:"searcher_phone"})]}),Object(u.jsxs)("label",{children:["\u0410\u0434\u0440\u0435\u0441:",Object(u.jsx)("input",{type:"adress",name:"searcher_place"})]}),Object(u.jsxs)("label",{children:["\u0412\u0440\u0435\u043c\u044f:",Object(u.jsx)("input",{type:"datetime-local",name:"searcher_time"})]}),Object(u.jsxs)("label",{children:["\u0420\u043e\u043b\u044c:",Object(u.jsxs)("select",{name:"searcher_role",children:[Object(u.jsx)("option",{selected:!0,value:"\u043f\u0435\u0448\u0438\u0439",children:"\u041f\u0435\u0448\u0438\u0439"}),Object(u.jsx)("option",{value:"\u043f\u0438\u043b\u043e\u0442",children:"\u041f\u0438\u043b\u043e\u0442"}),Object(u.jsx)("option",{value:"\u0438\u043d\u0444\u043e\u0440\u0433",children:"\u0418\u043d\u0444\u043e\u0440\u0433"}),Object(u.jsx)("option",{value:"\u0441\u043d\u043c",children:"\u0421\u041d\u041c"}),Object(u.jsx)("option",{value:"\u043a\u043e\u043e\u0440\u0434",children:"\u041a\u043e\u043e\u0440\u0434"})]})]}),Object(u.jsx)("input",{type:"submit",value:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})})]})},P=function(e){var c=e.setSearcherData,t=Object(r.useState)(!1),a=Object(i.a)(t,2),s=(a[0],a[1],Object(r.useState)([])),n=Object(i.a)(s,2),o=n[0],j=n[1],h=Object(d.e)(),b=function(e){var t=e.searcher;return Object(u.jsx)("div",{className:x.a.modal,children:Object(u.jsxs)("div",{className:x.a.modalWrapper,children:[Object(u.jsxs)("div",{className:x.a.modalHeader,children:[Object(u.jsx)("h3",{children:t.call_sign}),Object(u.jsx)("div",{className:x.a.modalClose,onClick:function(){return O()},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]}),Object(u.jsxs)("div",{className:x.a.modalSearcherBody,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{children:Object(u.jsx)("img",{src:v})}),Object(u.jsx)("span",{children:t.searcher_place})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{children:Object(u.jsx)("img",{src:g})}),Object(u.jsx)("span",{children:S(t.searcher_time)})]})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{className:x.a.modalButton,children:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"}),Object(u.jsx)("li",{children:Object(u.jsx)(l.b,{className:x.a.modalButton,onClick:function(){return c(t)},to:"/edit_searcher?quest_id="+_,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),Object(u.jsx)("li",{className:x.a.modalButton,children:"\u0412 \u044d\u043a\u0438\u043f\u0430\u0436"}),Object(u.jsx)("li",{className:x.a.modalButton,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})]})})},O=function(e){console.log(o),o[0]?(document.body.style.overflowY="auto",j([!1])):(document.body.style.overflowY="hidden",j([!0,e]))};var _=new URLSearchParams(Object(d.f)().search).get("quest_id");return Object(u.jsxs)("div",{className:x.a.searchers,children:[o[0]&&Object(u.jsx)(b,{searcher:o[1]}),Object(u.jsxs)("div",{className:x.a.header,children:[Object(u.jsx)("div",{className:x.a.back,onClick:function(){return h.goBack()},children:Object(u.jsx)("img",{src:f,alt:"back"})}),Object(u.jsx)("h1",{children:"\u041a\u043e\u043c\u0430\u043d\u0434\u0430"})]}),Object(u.jsx)("div",{children:Object(u.jsx)(l.b,{className:x.a.addSearcher,to:"/add_searcher?quest_id="+_,children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u0438\u043a\u0430"})}),Object(u.jsx)(D,{questID:_,toggleModal:O})]})},M=new h.a({apiKey:"keyHvrSKnN3fo7ORx"}).base("appou4euyZ2UDPPEg"),q=function(e){var c=e.searcherData,t=(e.setSearcherData,Object(d.e)());console.log(c),Object(r.useEffect)((function(){document.body.style.overflowY="auto"}),[]);var a=new URLSearchParams(Object(d.f)().search).get("quest_id");return Object(u.jsxs)("div",{className:C.a.editSearcher,children:[Object(u.jsxs)("div",{className:C.a.header,children:[Object(u.jsx)("div",{className:C.a.back,onClick:function(){return t.goBack()},children:Object(u.jsx)("img",{src:f,alt:"back"})}),Object(u.jsx)("h1",{children:"\u0420\u0435\u0434\u0430\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("form",{className:C.a.form,onSubmit:function(e){return function(e){e.preventDefault();var r=Object.fromEntries(new FormData(e.target)),s=new Date(r.searcher_time).toISOString(),n={quest_id:parseInt(a),searcher_id:parseInt(r.searcher_id),searcher_place:r.searcher_place,searcher_role:[r.searcher_role],searcher_time:s},i={searcher_id:parseInt(r.searcher_id),searcher_phone:r.searcher_phone,call_sign:r.call_sign};M("CrewMeta").update([{id:c.meta_table_id,fields:n}],(function(e,r){e?console.error(e):(r.forEach((function(e){console.log(e.getId())})),M("Searchers").update([{id:c.searchers_table_id,fields:i}],(function(e,c){e?console.error(e):(c.forEach((function(e){console.log(e.getId())})),t.goBack())})))}))}(e)},children:[Object(u.jsxs)("label",{children:["\u041f\u043e\u0437\u044b\u0432\u043d\u043e\u0439:",Object(u.jsx)("input",{type:"text",name:"call_sign",defaultValue:c.call_sign})]}),Object(u.jsxs)("label",{children:["@id:",Object(u.jsx)("input",{type:"number",name:"searcher_id",defaultValue:c.searcher_id})]}),Object(u.jsxs)("label",{children:["\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430:",Object(u.jsx)("input",{type:"phone",name:"searcher_phone",defaultValue:c.searcher_phone})]}),Object(u.jsxs)("label",{children:["\u0410\u0434\u0440\u0435\u0441:",Object(u.jsx)("input",{type:"text",name:"searcher_place",defaultValue:c.searcher_place})]}),Object(u.jsxs)("label",{children:["\u0412\u0440\u0435\u043c\u044f:",Object(u.jsx)("input",{type:"datetime-local",name:"searcher_time",defaultValue:c.searcher_time.substring(0,16)})]}),Object(u.jsxs)("label",{children:["\u0420\u043e\u043b\u044c:",Object(u.jsxs)("select",{name:"searcher_role",multiple:!1,defaultValue:c.searcher_role,children:[Object(u.jsx)("option",{value:"\u043f\u0435\u0448\u0438\u0439",children:"\u041f\u0435\u0448\u0438\u0439"}),Object(u.jsx)("option",{value:"\u043f\u0438\u043b\u043e\u0442",children:"\u041f\u0438\u043b\u043e\u0442"}),Object(u.jsx)("option",{value:"\u0438\u043d\u0444\u043e\u0440\u0433",children:"\u0418\u043d\u0444\u043e\u0440\u0433"}),Object(u.jsx)("option",{value:"\u0441\u043d\u043c",children:"\u0421\u041d\u041c"}),Object(u.jsx)("option",{value:"\u043a\u043e\u043e\u0440\u0434",children:"\u041a\u043e\u043e\u0440\u0434"})]})]}),Object(u.jsx)("input",{type:"submit",value:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})})]})},L=function(){var e=Object(r.useState)({}),c=Object(i.a)(e,2),t=c[0],a=c[1];return Object(u.jsxs)(l.a,{children:[Object(u.jsx)(d.a,{path:"/",exact:!0,children:Object(u.jsx)(O,{})}),Object(u.jsx)(d.a,{exact:!0,path:"/crew",children:Object(u.jsx)(P,{setSearcherData:a})}),Object(u.jsx)(d.a,{exact:!0,path:"/add_searcher",children:Object(u.jsx)(I,{})}),Object(u.jsx)(d.a,{exact:!0,path:"/edit_searcher",children:Object(u.jsx)(q,{searcherData:t,setSearcherData:t})})]})},V=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,134)).then((function(c){var t=c.getCLS,r=c.getFID,a=c.getFCP,s=c.getLCP,n=c.getTTFB;t(e),r(e),a(e),s(e),n(e)}))};n.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(L,{})}),document.getElementById("root")),V()},2:function(e,c,t){e.exports={searchers:"Searchers_searchers__Va7jF",searcher:"Searchers_searcher__2jZ6l",separator:"Searchers_separator__3TIE7",searcherHeader:"Searchers_searcherHeader__26FAq",searcherBody:"Searchers_searcherBody__Yn6VV",modalSearcherBody:"Searchers_modalSearcherBody__1wNF6",searcherCallSign:"Searchers_searcherCallSign__2TlQu",isPilot:"Searchers_isPilot__1KrHB",back:"Searchers_back__3CnuC",status:"Searchers_status__BD_B1",selected:"Searchers_selected__kzEKR",header:"Searchers_header__1dNKN",addSearcher:"Searchers_addSearcher__3RBhX",modal:"Searchers_modal__33dOh",modalWrapper:"Searchers_modalWrapper__k_y_L",modalButton:"Searchers_modalButton__2fZKM",modalClose:"Searchers_modalClose__iP7Jp",modalHeader:"Searchers_modalHeader__zfvkV"}},57:function(e,c,t){}},[[133,1,2]]]);
//# sourceMappingURL=main.de18b478.chunk.js.map